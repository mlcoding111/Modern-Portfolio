import React from "react";
import styled from "styled-components";

import {
  motion,
  useViewportScroll,
  useSpring,
  useTransform
} from "framer-motion";

function Overlay() {
  const { scrollYProgress } = useViewportScroll();
  const [isComplete, setIsComplete] = React.useState(false);
  const yRange = useTransform(scrollYProgress, [0, 0.9], [0, 1]);
  const pathLength = useSpring(yRange, { stiffness: 400, damping: 90 });

  const border = {
    hidden: {
      opacity: 0,
      pathLength: 0,
      fill: "rgba(255, 255, 255, 0)",
    },
    visible: {
      opacity: 1,
      pathLength: 1,
      fill: "rgba(255, 255, 255, 0)",
    },
  };

  const text = {
    hidden: {
        opacity: 0,
        pathLength: 0
    },
    visible: {
        opacity: 1,
        pathLength: 1,
        // fill: "rgba(255, 255, 255, 1)",
    }
  }

  // React.useEffect(()=>{
  //   console.log(scrollYProgress)
  // }, [scrollYProgress])
  
  return (
    <Wrap>

    <svg width="137" height="137" viewBox="0 0 137 137" fill="none" xmlns="http://www.w3.org/2000/svg">
        <motion.path 
        variants={border}
        initial="hidden"
        animate="visible"
        transition={{
            default: { duration: 2, ease: "easeInOut" }
        }}
        d="M68.5 136.5C106.055 136.5 136.5 106.055 136.5 68.5C136.5 30.9446 106.055 0.5 68.5 0.5C30.9446 0.5 0.5 30.9446 0.5 68.5C0.5 106.055 30.9446 136.5 68.5 136.5Z" stroke="white"/>
        
        <motion.path
                variants={text}
        initial="hidden"
        animate="visible"
        transition={{
            default: { duration: 4, ease: "easeInOut" }
        }} 
        d="M25.4219 69.8281L35.1094 55.2656C35.2656 55.026 35.4219 54.8542 35.5781 54.75C35.7448 54.6458 35.9062 54.5938 36.0625 54.5938C36.2604 54.5938 36.4219 54.6771 36.5469 54.8438C36.6823 55 36.75 55.1979 36.75 55.4375V70.9062C36.75 71.2083 36.7135 71.4688 36.6406 71.6875C36.5677 71.8958 36.3802 72 36.0781 72C35.8177 72 35.6406 71.8958 35.5469 71.6875C35.4635 71.4688 35.4219 71.2083 35.4219 70.9062V57.0312L26.1875 70.6562C25.9375 71.0104 25.6823 71.1875 25.4219 71.1875C25.1406 71.1875 24.8854 71.0104 24.6562 70.6562L15.4219 57.0312V70.9062C15.4219 71.2083 15.375 71.4688 15.2812 71.6875C15.1979 71.8958 15.026 72 14.7656 72C14.4635 72 14.276 71.8958 14.2031 71.6875C14.1302 71.4688 14.0938 71.2083 14.0938 70.9062V55.4375C14.0938 55.1979 14.1562 55 14.2812 54.8438C14.4167 54.6771 14.5833 54.5938 14.7812 54.5938C14.9271 54.5938 15.0781 54.6458 15.2344 54.75C15.401 54.8542 15.5677 55.026 15.7344 55.2656L25.4219 69.8281ZM42.375 72C42.2188 72 42.0938 71.9948 42 71.9844C41.9167 71.974 41.8542 71.9531 41.8125 71.9219C41.7708 71.8802 41.7448 71.8229 41.7344 71.75C41.7344 71.6667 41.7344 71.5573 41.7344 71.4219V55.6094C41.7344 55.3385 41.7812 55.1042 41.875 54.9062C41.9688 54.6979 42.1667 54.5938 42.4688 54.5938C42.7188 54.5938 42.8802 54.7031 42.9531 54.9219C43.026 55.1302 43.0625 55.3594 43.0625 55.6094V70.9688H56.4844C56.6927 70.9688 56.849 71.026 56.9531 71.1406C57.0677 71.2448 57.125 71.3594 57.125 71.4844C57.125 71.6198 57.0677 71.7396 56.9531 71.8438C56.849 71.9479 56.6927 72 56.4844 72H42.375ZM73.9844 70.0469L79.2031 55.4531C79.2865 55.2448 79.3802 55.0521 79.4844 54.875C79.5885 54.6875 79.7292 54.5938 79.9062 54.5938C80.1146 54.5938 80.2552 54.651 80.3281 54.7656C80.4115 54.8802 80.4531 54.9948 80.4531 55.1094C80.4531 55.224 80.4323 55.3438 80.3906 55.4688C80.3594 55.5938 80.3177 55.7292 80.2656 55.875L74.75 71.1719C74.6354 71.4115 74.5312 71.6094 74.4375 71.7656C74.3438 71.9219 74.1927 72 73.9844 72C73.776 72 73.6198 71.9219 73.5156 71.7656C73.4219 71.6094 73.3333 71.4115 73.25 71.1719L68.0312 56.6719L62.8438 71.1719C62.7604 71.4115 62.6615 71.6094 62.5469 71.7656C62.4323 71.9219 62.276 72 62.0781 72C61.8698 72 61.7135 71.9219 61.6094 71.7656C61.5156 71.6094 61.4271 71.4115 61.3438 71.1719L55.8438 55.875C55.7917 55.7292 55.7396 55.5938 55.6875 55.4688C55.6458 55.3438 55.625 55.224 55.625 55.1094C55.625 54.9948 55.6667 54.8802 55.75 54.7656C55.8333 54.651 55.9792 54.5938 56.1875 54.5938C56.3854 54.5938 56.5312 54.6875 56.625 54.875C56.7292 55.0521 56.8229 55.2448 56.9062 55.4531L62.0781 70.0469L67.2969 55.4531C67.3802 55.2448 67.4688 55.0521 67.5625 54.875C67.6667 54.6875 67.8125 54.5938 68 54.5938C68.2396 54.5938 68.4062 54.6719 68.5 54.8281C68.6042 54.9844 68.7031 55.1927 68.7969 55.4531L73.9844 70.0469ZM100.594 71.4531C100.594 71.6094 100.568 71.724 100.516 71.7969C100.464 71.8698 100.391 71.9219 100.297 71.9531C100.214 71.9844 100.109 72 99.9844 72C99.8594 72 99.7188 72 99.5625 72H84.9688C84.8646 72 84.7865 71.9948 84.7344 71.9844C84.6823 71.974 84.6406 71.9479 84.6094 71.9062C84.5885 71.8646 84.5729 71.8125 84.5625 71.75C84.5625 71.6771 84.5625 71.5781 84.5625 71.4531V55.3281C84.5625 55.1719 84.5625 55.0469 84.5625 54.9531C84.5729 54.8594 84.5938 54.7865 84.625 54.7344C84.6562 54.6823 84.7083 54.6458 84.7812 54.625C84.8646 54.6042 84.9844 54.5938 85.1406 54.5938H99.4062C99.5625 54.5938 99.7083 54.5938 99.8438 54.5938C99.9792 54.5938 100.099 54.6094 100.203 54.6406C100.318 54.6719 100.406 54.724 100.469 54.7969C100.531 54.8698 100.562 54.9844 100.562 55.1406C100.562 55.2656 100.531 55.3646 100.469 55.4375C100.406 55.5 100.318 55.5469 100.203 55.5781C100.099 55.6094 99.9792 55.625 99.8438 55.625C99.7083 55.625 99.5625 55.625 99.4062 55.625H85.8906V62.4688H99.3281C99.5573 62.4688 99.75 62.5 99.9062 62.5625C100.062 62.625 100.141 62.7604 100.141 62.9688C100.141 63.1979 100.073 63.349 99.9375 63.4219C99.8125 63.4948 99.6458 63.5312 99.4375 63.5312H85.8906V70.9688H99.4375C99.5938 70.9688 99.7396 70.9688 99.875 70.9688C100.01 70.9688 100.13 70.9844 100.234 71.0156C100.349 71.0469 100.438 71.099 100.5 71.1719C100.562 71.2344 100.594 71.3281 100.594 71.4531ZM122.359 66.9062C122.359 67.9688 122.156 68.8333 121.75 69.5C121.344 70.1562 120.781 70.6719 120.062 71.0469C119.354 71.4115 118.516 71.6615 117.547 71.7969C116.578 71.9323 115.536 72 114.422 72H105.422C105.245 72 105.109 71.9479 105.016 71.8438C104.932 71.7396 104.891 71.6094 104.891 71.4531V55.1719C104.891 54.9844 104.948 54.8438 105.062 54.75C105.177 54.6458 105.323 54.5938 105.5 54.5938H112.656C113.406 54.5938 114.146 54.6042 114.875 54.625C115.604 54.6354 116.292 54.6875 116.938 54.7812C117.594 54.8646 118.193 54.9948 118.734 55.1719C119.286 55.349 119.76 55.599 120.156 55.9219C120.562 56.2448 120.875 56.651 121.094 57.1406C121.323 57.6302 121.438 58.2292 121.438 58.9375C121.438 59.5417 121.354 60.0521 121.188 60.4688C121.021 60.8854 120.807 61.2344 120.547 61.5156C120.297 61.7969 120.016 62.0208 119.703 62.1875C119.391 62.3438 119.089 62.4635 118.797 62.5469C118.505 62.6198 118.24 62.6667 118 62.6875C117.76 62.7083 117.583 62.7188 117.469 62.7188H117.359C117.995 62.7812 118.609 62.8906 119.203 63.0469C119.797 63.2031 120.323 63.4427 120.781 63.7656C121.25 64.0781 121.625 64.4896 121.906 65C122.198 65.5104 122.349 66.1458 122.359 66.9062ZM120.109 58.9375C120.109 58.4062 120.021 57.9375 119.844 57.5312C119.667 57.1146 119.328 56.7656 118.828 56.4844C118.328 56.2031 117.63 55.9896 116.734 55.8438C115.839 55.6979 114.672 55.625 113.234 55.625H106.219V62.3281H113.609C114.734 62.3281 115.703 62.2865 116.516 62.2031C117.339 62.1094 118.016 61.9375 118.547 61.6875C119.078 61.4375 119.469 61.0938 119.719 60.6562C119.979 60.2188 120.109 59.6458 120.109 58.9375ZM121.031 66.9062C121.031 66.1875 120.854 65.5885 120.5 65.1094C120.156 64.6302 119.661 64.25 119.016 63.9688C118.38 63.6875 117.604 63.4896 116.688 63.375C115.771 63.25 114.745 63.1875 113.609 63.1875H106.219V70.9688H115.016C116.422 70.9688 117.526 70.8542 118.328 70.625C119.141 70.3958 119.745 70.0938 120.141 69.7188C120.536 69.3438 120.781 68.9115 120.875 68.4219C120.979 67.9323 121.031 67.4271 121.031 66.9062Z" fill="white"/>
        
        <motion.path 
                variants={text}
        initial="hidden"
        animate="visible"
        transition={{
            default: { duration: 4, ease: "easeInOut" },
            // fill: { duration: 1, ease: [1, 0, 0.8, 1] }
        }}
        d="M27.2676 80.4688H27.6074L27.1504 81.8867L25.0176 89H24.7188L25.252 87.0664L27.2676 80.4688ZM24.4785 87.0664L25.0117 89H24.6602L22.3574 80.4688H22.709L24.4785 87.0664ZM32.1602 80.4688H32.5059L30.209 89H29.8574L30.4023 87.0664L32.1602 80.4688ZM29.623 87.0664L30.1504 89H29.8516L27.7363 81.8867L27.2734 80.4688H27.6191L29.623 87.0664ZM39.2383 89H34.1582V88.6836H39.2383V89ZM34.3633 89H34.0469V80.4688H34.3633V89ZM38.6406 84.7695H34.1582V84.4531H38.6406V84.7695ZM39.2383 80.7852H34.1582V80.4688H39.2383V80.7852ZM41.0723 84.7871L41.0605 84.4707H43.2402C44.0137 84.4707 44.5977 84.3203 44.9922 84.0195C45.3906 83.7188 45.5898 83.2559 45.5898 82.6309C45.5898 82.0176 45.3809 81.5566 44.9629 81.248C44.5488 80.9395 43.9355 80.7852 43.123 80.7852H41.1953V89H40.8789V80.4688H43.123C43.9863 80.4688 44.666 80.6445 45.1621 80.9961C45.6621 81.3477 45.9121 81.9004 45.9121 82.6543C45.9121 83.0059 45.8457 83.3223 45.7129 83.6035C45.584 83.8848 45.3945 84.1133 45.1445 84.2891C44.8945 84.4648 44.5859 84.5723 44.2188 84.6113L43.7207 84.7871H41.0723ZM41.0605 89L41.1602 88.6836H43.6621C44.3809 88.6836 44.9473 88.5059 45.3613 88.1504C45.7754 87.7949 45.9824 87.2988 45.9824 86.6621C45.9824 86.334 45.8984 86.0273 45.7305 85.7422C45.5664 85.457 45.3164 85.2266 44.9805 85.0508C44.6445 84.875 44.2246 84.7871 43.7207 84.7871H42.3379L42.3496 84.4707H44.3711L44.3945 84.582C44.7539 84.625 45.0762 84.7441 45.3613 84.9395C45.6504 85.1348 45.8789 85.3828 46.0469 85.6836C46.2148 85.9805 46.2988 86.3027 46.2988 86.6504C46.2988 87.4082 46.0527 87.9902 45.5605 88.3965C45.0723 88.7988 44.4395 89 43.6621 89H41.0605ZM51.2734 89L51.2852 88.6836H53.3535C53.9668 88.6836 54.5137 88.5371 54.9941 88.2441C55.4785 87.9512 55.8594 87.5469 56.1367 87.0312C56.418 86.5156 56.5586 85.9238 56.5586 85.2559V84.1953C56.5586 83.5312 56.418 82.9434 56.1367 82.4316C55.8594 81.9199 55.4785 81.5176 54.9941 81.2246C54.5137 80.9316 53.9668 80.7852 53.3535 80.7852H51.2383V80.4688H53.3535C54.0254 80.4688 54.627 80.627 55.1582 80.9434C55.6895 81.2598 56.1074 81.6992 56.4121 82.2617C56.7207 82.8203 56.875 83.4707 56.875 84.2129V85.2559C56.875 85.998 56.7207 86.6504 56.4121 87.2129C56.1074 87.7715 55.6895 88.209 55.1582 88.5254C54.627 88.8418 54.0254 89 53.3535 89H51.2734ZM51.3086 89H50.9922V80.4688H51.3086V89ZM64.0352 89H58.9551V88.6836H64.0352V89ZM59.1602 89H58.8438V80.4688H59.1602V89ZM63.4375 84.7695H58.9551V84.4531H63.4375V84.7695ZM64.0352 80.7852H58.9551V80.4688H64.0352V80.7852ZM71.125 80.4688H71.4707L68.2832 89H67.9844L68.2598 88.168L71.125 80.4688ZM67.9199 88.168L68.1953 89H67.8965L64.709 80.4688H65.0547L67.9199 88.168ZM78.0391 89H72.959V88.6836H78.0391V89ZM73.1641 89H72.8477V80.4688H73.1641V89ZM77.4414 84.7695H72.959V84.4531H77.4414V84.7695ZM78.0391 80.7852H72.959V80.4688H78.0391V80.7852ZM84.3789 89H79.7969V88.6836H84.3789V89ZM80.002 89H79.6797V80.4688H80.002V89ZM91.5332 85.373C91.5332 86.1152 91.4023 86.7676 91.1406 87.3301C90.8789 87.8926 90.5078 88.332 90.0273 88.6484C89.5469 88.9609 88.9785 89.1172 88.3223 89.1172C87.6699 89.1172 87.1016 88.9609 86.6172 88.6484C86.1367 88.332 85.7637 87.8926 85.498 87.3301C85.2324 86.7676 85.0996 86.1152 85.0996 85.373V84.0957C85.0996 83.3535 85.2305 82.7012 85.4922 82.1387C85.7578 81.5762 86.1309 81.1387 86.6113 80.8262C87.0918 80.5098 87.6582 80.3516 88.3105 80.3516C88.9668 80.3516 89.5352 80.5098 90.0156 80.8262C90.5 81.1387 90.873 81.5762 91.1348 82.1387C91.4004 82.7012 91.5332 83.3535 91.5332 84.0957V85.373ZM91.2168 84.084C91.2168 83.416 91.1016 82.8262 90.8711 82.3145C90.6445 81.7988 90.3145 81.3965 89.8809 81.1074C89.4473 80.8145 88.9238 80.668 88.3105 80.668C87.7012 80.668 87.1816 80.8145 86.752 81.1074C86.3223 81.3965 85.9922 81.7988 85.7617 82.3145C85.5352 82.8262 85.4219 83.416 85.4219 84.084V85.373C85.4219 86.041 85.5371 86.6328 85.7676 87.1484C85.998 87.6641 86.3281 88.0684 86.7578 88.3613C87.1914 88.6543 87.7129 88.8008 88.3223 88.8008C88.9355 88.8008 89.457 88.6543 89.8867 88.3613C90.3203 88.0684 90.6504 87.6641 90.877 87.1484C91.1035 86.6328 91.2168 86.041 91.2168 85.373V84.084ZM93.5605 85.3965V85.0801H96.1504C96.7246 85.0801 97.1914 84.9863 97.5508 84.7988C97.9102 84.6074 98.1719 84.3516 98.3359 84.0312C98.5039 83.7109 98.5879 83.3574 98.5879 82.9707C98.5879 82.5684 98.5039 82.2031 98.3359 81.875C98.1719 81.543 97.9102 81.2793 97.5508 81.084C97.1914 80.8848 96.7246 80.7852 96.1504 80.7852H93.8008V89H93.4844V80.4688H96.1504C96.7559 80.4688 97.2617 80.5723 97.668 80.7793C98.0781 80.9863 98.3867 81.2773 98.5938 81.6523C98.8008 82.0234 98.9043 82.459 98.9043 82.959C98.9043 83.459 98.8008 83.8926 98.5938 84.2598C98.3906 84.623 98.084 84.9043 97.6738 85.1035C97.2676 85.2988 96.7598 85.3965 96.1504 85.3965H93.5605ZM105.883 89H100.803V88.6836H105.883V89ZM101.008 89H100.691V80.4688H101.008V89ZM105.285 84.7695H100.803V84.4531H105.285V84.7695ZM105.883 80.7852H100.803V80.4688H105.883V80.7852ZM110.213 80.4688C110.756 80.4688 111.238 80.5645 111.66 80.7559C112.082 80.9434 112.412 81.2207 112.65 81.5879C112.893 81.9512 113.014 82.3984 113.014 82.9297C113.014 83.3438 112.924 83.7188 112.744 84.0547C112.564 84.3867 112.324 84.6602 112.023 84.875C111.723 85.0898 111.387 85.2246 111.016 85.2793L110.834 85.3496H107.57L107.559 85.0332H110.5C110.988 85.0332 111.395 84.9316 111.719 84.7285C112.043 84.5254 112.287 84.2637 112.451 83.9434C112.615 83.6191 112.697 83.2812 112.697 82.9297C112.697 82.2578 112.473 81.7324 112.023 81.3535C111.574 80.9746 110.971 80.7852 110.213 80.7852H107.811V89H107.494V80.4688H110.213ZM110.699 85.2383L111.068 85.2266L113.371 88.918V89H113.037L110.699 85.2383Z" fill="#D72323"/>
    </svg>

    <svg className="progress-icon" viewBox="0 0 60 60">
        <motion.path
          fill="none"
          strokeWidth="5"
          stroke="white"
          strokeDasharray="0 1"
          d="M 0, 20 a 20, 20 0 1,0 40,0 a 20, 20 0 1,0 -40,0"
          style={{
            pathLength,
            rotate: 90,
            translateX: 5,
            translateY: 5,
            scaleX: -1 // Reverse direction of line animation
          }}
        />
        <motion.path
          fill="none"
          strokeWidth="5"
          stroke="white"
          d="M14,26 L 22,33 L 35,16"
          initial={false}
          strokeDasharray="0 1"
          animate={{ pathLength: isComplete ? 1 : 0 }}
        />
    </svg>


    </Wrap>
  );
}

export default Overlay;

export const Wrap = styled(motion.div)`
    position: fixed;
    width: 150px;
    height: 150px;
    background: transparent;
    z-index: 999 !important;
    svg{
       margin: 2em;
    }
`;
